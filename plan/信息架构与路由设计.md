# 信息架构与路由设计

更新时间：2026-02-08（v4）

## 1. 目标与约束

- 纯静态站点，不引入业务后端。
- 内容来源于仓库 `content/`，通过构建阶段映射成前端静态数据。
- 移动端与桌面端同权。
- 详情不跳转新路由，采用列表页内“卡片放大居中”交互。
- 详情打开时不修改 URL。

## 2. 页面信息架构

### 2.1 页面清单

- `/` 通知主页面
  - 左侧：订阅源/学院筛选
  - 中间：卡片流（支持分页/筛选/搜索）
  - 右侧：日期筛选与概览
  - 同页弹出：通知详情（卡片放大后进入详情层）

- `/school/:slug` 学院列表页面
  - 与首页同构，但默认筛选到指定学院
  - 支持直接分享给特定学院同学

- `/dashboard` 仪表盘页面
  - 订阅源活跃度
  - 核心统计

### 2.2 明确不做

- 不做 `/notice/:id` 详情路由。
- 不做 `/search` 独立页面，搜索采用同页实时过滤。

## 3. 列表页交互约束

- 卡片点击后在当前页进入详情层（Modal/Overlay + 放大动效）。
- 详情关闭后回到原滚动位置和筛选状态。
- 详情层内提供“上一条/下一条”快捷切换。
- 分类筛选在首页与学院页都可用。
- 已读状态在本地持久化（localStorage/IndexedDB）。

## 4. 置顶与排序规则

- 置顶作用域：分类内置顶（`pinned` 在同分类优先）。
- 默认排序建议：
  1) 分类内 `pinned = true`
  2) 发布时间降序
  3) 次级稳定排序（`id`）

## 5. 搜索策略（静态）

- 范围：标题 + 正文。
- 阶段策略：
  - 第一阶段：单一索引文件（全站）
  - 第二阶段：按学院/分类拆分索引，减少首屏载入
- 交互策略：同页实时过滤（输入即过滤当前结果）。
- 执行语义：
  - 先基于全站索引实时命中候选
  - 再按当前页面上下文（首页/学院页/分类筛选）进行二次过滤展示

## 6. 动效约束（详情打开）

- 目标效果：卡片放大居中并进入详情层（你提供的 TS 参考样式作为视觉基准）。
- 必要要求：
  - 打开/关闭均有过渡
  - 背景遮罩与滚动锁定
  - ESC/点击遮罩关闭
  - 关闭后恢复原滚动位置
  - 详情打开时 URL 保持不变
  - 详情内可切换上一条/下一条
  - 附件区独立展示并置于正文前（下载优先）

## 7. 后续拆分建议（代码层）

- `pages/HomePage.tsx`：列表页主容器
- `pages/SchoolPage.tsx`：学院页主容器
- `pages/DashboardPage.tsx`：仪表盘
- `components/NoticeCard.tsx`：卡片
- `components/NoticeDetailModal.tsx`：详情层
- `lib/search/`：搜索索引加载与查询逻辑
